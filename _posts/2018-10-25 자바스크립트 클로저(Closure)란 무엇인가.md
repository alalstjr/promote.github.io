<div class="box">
  <div class="small-title">자바스크립트 클로저(Closure)</div>
  <div class="pro-txt">
    <a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Guide/Closures" target="_balnk">
      MDN - 클로저 (함수와 함수가 선언된 어휘적 환경의 조합 Lexical scoping)
    </a>
    <p>자바스크립트의 매우 강력한 특성으로 독립적인 변수를 참조하는 함수</p>
    <p>클로저에 정의된 함수는 그것(함수)이 작성된 환경을 기억 한다.</p>
  </div>
  
{% highlight javascript %}
function box() {
  // 함수 영역 내부에 선언된 지역 변수
  var text = 1;
  
  // 함수 영역 내부에 선언된 지역 함수
  function boxBox() {
    console.log(text++)
  }
  
  // 지역 함수를 반환합니다.
  return boxBox;
}

// box() 함수에서 반환된 boxBox 함수를 전역 변수 global 변수에 참조 합니다.
var global = box();

// global는 함수 참조로 실행할 때마다 결과를 출력한다.
for (var i = 0; i < 10; ++i){
  global();
}
{% endhighlight %}

<p>box() 함수 내부에 위치한 text 변수는 지역 변수 외부에서 접근이 불가능합니다.</p>
<p>그리고 boxBox() 함수를 실행시키지 않고 바로 반환 시킵니다.</p>
<p>우선 결과를 확인하기 전에 box() 함수 내부에 존재하는 text 변수를 밖에서 불러와 보겠습니다.</p>
<div class="img-box">
  <img src="{{ site.baseurl }}/static/img/post/2018-10-25-1.png" alt="자바스크립트 출력확인" />
</div>
<p>변수 text 는 box() 외부에서는 접근이 불가능합니다.</p>
<p>그래서 외부에서 출력한결과 변수 text를 찾을 수 없다고 출력합니다.</p>
<p>그리고 global 변수 함수의 내부의 text 는 외부에서 접근이 불가능 하지만</p>
<p>global 이라하는 외부의 식별자의 참조되어 있는 함수 boxBox() 는</p>
<p>global 안에서 실행이 가능하다.</p>
<p>global 안에 존재하는 변수 text를 어떻게 참조하여 출력 가능한것인가</p>
<p>그 이유는 바로 안쪽의 함수는 밖의 함수에 접근이 가능하기 때문에 text값을 참조할 수 있는것이다.</p>
<p>for문을 뺀 상태 에서 global 변수 함수를 실행시켜보면 text값이 증가 되는것을 확인할 수 있습니다. </p>
<div class="img-box">
  <img src="{{ site.baseurl }}/static/img/post/2018-10-25-2.png" alt="자바스크립트 출력확인" />
</div>
<p>이는 함수 내부에서 text 값이 기존의 값을 기억하고 있기때문에</p>
<p>하나의 함수를 실행시키므로서 text 값을 증가 시키는 것이다.</p>
<p>global 변수 함수를 실행시킬때 마다 결과값이 달라지는 것 입니다.</p>
<p>이를 클로저 라 부릅니다. (솔직히 저도 지금은 잘 이해가 안갑니다.)</p>
<p>(좀더 예시문을 보면서 같이 이해해보도록 합시다.)</p>
</div>

<div class="box">
{% highlight javascript %}
  function addNum() {
    var num = 1;
    return num++;
  }
{% endhighlight %}
  <p>addNum() 함수를 실행시킨다면 num 변수의 값이 증감하여 2가 될것인가 확인해보면</p>
<div class="img-box">
  <img src="{{ site.baseurl }}/static/img/post/2018-10-25-3.png" alt="자바스크립트 출력확인" />
</div>
  <p>num 값은 고정으로 1인것을 확인할 수 있습니다.</p>
  <p>이유는 addNum() 함수가 실행될때마다 변수 num 값이 메모리에 다시 등록되어 1로 고정되는 것이다.</p>
  <p>그렇다면 메모리에 한번 저장등록 될수 있도록 변수 num 값을 함수 밖으로 빼서 실행시킨다면 어떻게 될것인가.</p>
<div class="img-box">
  <img src="{{ site.baseurl }}/static/img/post/2018-10-25-4.png" alt="자바스크립트 출력확인" />
</div>
  <p>우선은 num 값이 증감되어 출력되는 것을 확인할 수 있습니다.</p>
  <p>하지만 값이 정상적으로 출력된다 하더라도 변수 num 값이 함수 밖에 존재함으로서</p>
  <p>전역을 오염시켜 다른 함수의 오류를 발생시킬 수도 있습니다.</p>
</div>

<div class="box">
  <p>저희는 무조건 변수로 전역을 오염 시키지 않는 방법으로 코드를 짜야합니다.</p>
  <p>함수가 함수를 내보낸 함수를 실행하고 실행된 함수의 공간의 대한 변수 또는 함수를 기억할 수 있는 공간을</p>
  <p>클로저 라고 합니다.</p>
</div>
